### DDD与微服务关系

领域驱动设计中限界上下文与微服务之间的映射关系

如何识别和设计微服务？领域驱动的战略设计可以提供一些方法论支持

### 为什么要学习领域驱动设计

- 领域驱动设计是一套完整而系统的设计方法，它能带给你从战略设计到战术设计的规范过程，使得你的设计思路能够更加清晰，设计过程更加规范。
- 领域驱动设计尤其善于处理与领域相关的高复杂度业务的产品研发，通过它可以为你的产品建立一个核心而稳定的领域模型内核，有利于领域知识的传递与传承。
- 领域驱动设计强调团队与领域专家的合作，能够帮助团队建立一个沟通良好的团队组织，构建一致的架构体系。
- 领域驱动设计强调对架构与模型的精心打磨，尤其善于处理系统架构的演进设计。
- 领域驱动设计的思想、原则与模式有助于提高团队成员的面向对象设计能力与架构设计能力。
- 领域驱动设计与微服务架构天生匹配，无论是在新项目中设计微服务架构，还是将系统从单体架构演进到微服务设计，都可以遵循领域驱动设计的架构原则。

### 怎么学习

**学会对设计的本质思考，不要只限于对设计概念的掌握，而要追求对设计原则与方法的融汇贯通**

**设计观念的转变，蕴含了全新的设计思想、设计原则与设计过程**

**思考什么是领域?**  一组关键的元素，连接方式   , 客观规律(万有引力的本质，就可以对我们能够观察到的宇宙天体建立模型)

**模型**  地图

### 领域驱动设计内容

基本过程

<img src="http://images.gitbook.cn/2b047ae0-7854-11e8-9ada-255ab1257678"></img>

<img src="http://images.gitbook.cn/5d450330-7854-11e8-974f-33e8b8ec2777"></img>

### 领域驱动对复杂度应对

技术复杂度与业务复杂度关注点分离

分层架构 与 六边形架构

限界上下文 水平拆分与垂直拆分

### 领域场景分析

6W模型

<img src="http://images.gitbook.cn/a463fa10-7920-11e8-afa8-8db2b8bc59f2">

用例，用户故事，测试驱动开发

### 统一语言

统一的领域述语和领域行为描述, 维护领域术语表，中英文定义

### 限界上下文(Bounded Context)

边界内维持领域模型的一致性与完整性

context表现业务流程的某一场景， 动态业务流程被边界静态切分

在同一个上下文中，活动为某一目标服务

知识，角色， 边界

划分限界上下文原则业务相关性，藕合的强弱程度，分离的关注点

上下文（Context）是业务目标，限界（Bounded）则是保护和隔离上下文的边界，避免业务目标的不单一而带来的混乱与概念的不一致 

为什么要引入限界上下文？ 怎么界划分限界上下文?

限界上下文影响领域逻辑，团队合作，技术实现 ，控制边界

分而治之 将大领域模型根据应用程序的业务需要“切割”成一系列较小的模型

限界上下文是一个自治单元 最小完备、稳定空间、自我履行、独立进化, 最小完备是基础

控制边界, 每一个限界上下文拥有自己的领域模型

按其它维度划分限界上下文  技术/功能重用等

### 识别限界上下文

通过从业务边界到工作边界再到应用边界这三个层次抽丝剥茧，分别以不同的视角、不同的角色协作来运用对应的设计原则，会是一个可行的识别限界上下文的过程方法  业务边界->工作边界->应用边界

![](https://images.gitbook.cn/6b5cd000-a361-11e8-80dc-8d254ca863fe)

业务场景-> 业务活动->语义相关性和功能相关性

工作边界 -> 工作量和团队组织

应用边界 ->  质量属性，重用和变化

### 上下文映射

团队协作模式

- 合作关系
- 共享内核
- 客人方与供应方开发
- 分离方式

通信集成模式

- 防腐层  场景遗留系统抽象分支与防腐层
- 开放主机服务 
- 发布订阅服务

### 分层架构

隔离不同的关注点, 基础设施和领域逻辑问题会以不同速率发生变化

同一层的组件处于同一个抽象层次

整洁架构->干净的应用层和领域层, 整个架构不同视角以及不同抽象层次的关注点，并为这些关注点划分不同层次的边界

六边形架构->内层与外层以及与外部资源之间通信的本质

### 需求分析

确定利益相关人 -> 确定业务期望和愿景

优先级权衡 -> 价值滑动条

思考参与者与用例之间的关系 ->用关系代表了业务价值

